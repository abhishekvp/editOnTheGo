(function(){var e=function(e){return{first:1,prev:e.current_page-1,next:e.current_page+1,last:e.pages}},t=function(e){return{current_page:Number(e.getAttribute("data-current-page")),current_offset:Number(e.getAttribute("data-current-offset")),page_size:Number(e.getAttribute("data-page-size")),pages:Number(e.getAttribute("data-pages")),padding:Number(e.getAttribute("data-page-padding")||-1),prevnext:!!e.getAttribute("data-prevnext"),firstlast:!!e.getAttribute("data-firstlast")}};xtag.register("x-pager",{content:'<a data-pager-element="first">first</a><a data-pager-element="prev">previous</a><a data-pager-element="next">next</a><a data-pager-element="last">last</a>',setters:{"data-current-page":function(e){this.setAttribute("data-current-page",e),xtag.tags["x-pager"].onInsert.call(this)}},events:{"tap:delegate(a)":function(n){var r=t(this.parentElement);!r.current_page&&r.current_offset&&r.page_size&&(r.current_page=r.current_offset/r.page_size);var i=e(r);for(var s in i)if(this.getAttribute("data-pager-element")==s)var o=r.current_page=i[s];o||(r.current_page=Number(this.innerHTML)),this.parentElement["data-current-page"]=r.current_page}},onInsert:function(){var n=this,r=t(this),i=this.children.length>4;!r.current_page&&r.current_offset&&r.page_size&&(r.current_page=r.current_offset/r.page_size);var s=function(e){var t=n.getAttribute("data-url");return t?t.replace("{current-page}",e).replace("{current-offset}",r.page_size*e):"#"},o=function(e,t,n){var r=document.createElement("a");return r.setAttribute("href",s(e)),r.innerHTML=n||e,t&&r.setAttribute("selected",!0),r},u=e(r);xtag.query(this,"[data-pager-element]").forEach(function(e){e.href=s(u[e.getAttribute("data-pager-element")])}),r.padding=r.padding==-1?r.pages:r.padding;var a=r.current_page-r.padding<1?1:r.current_page+r.padding>r.pages?r.pages-r.padding*2:r.current_page-r.padding,f=r.current_page+r.padding>r.pages?r.pages:r.current_page-r.padding<1?r.padding*2+1:r.current_page+r.padding;for(var l=a;l<=f;l++)if(i){var c=this.children[l+2-a];c.setAttribute("href",s(l)),c.setAttribute("selected",r.current_page==l),c.innerHTML=l}else{var h=o(l,r.current_page==l);this.insertBefore(h,this.children[this.children.length-2])}this.setAttribute("data-hidefirst",r.firstlast&&r.current_page==1),this.setAttribute("data-hidelast",r.firstlast&&r.current_page==r.pages),this.setAttribute("data-hideprev",r.prevnext&&r.current_page==1),this.setAttribute("data-hidenext",r.prevnext&&r.current_page==r.pages)}})})()